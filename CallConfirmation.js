function u(n,t=!0){return window.enmity.getModule(n,t)}function s(n={title:"Default dialog"}){window.enmity.dialog.showDialog(n)}function r(n,t,e,a){return{unpatchAll:window.enmity.patcher.instead(n,t,e,a)}}function d(n){window.enmity.plugins.registerPlugin(n)}const h=u(n=>{var t;return(t=n.default)==null?void 0:t.getChannel}),f=u(n=>{var t,e,a;return((t=n.default)==null?void 0:t.call)&&((e=n.default)==null?void 0:e.ring)&&((a=n.default)==null?void 0:a.stopRinging)});d({name:"CallConfirmation",patches:[],onStart:function(){const n=r(this.name,f.default,"call",(t,e,a)=>{const c=e[0],i=h.default.getChannel(c);let l;if(i.type==3)l=i.name,l.trim()===""&&(l=i.rawRecipients.map(o=>o.username).join(", "));else{const o=i.rawRecipients[0];l=`${o.username}#${o.discriminator}`}s({title:"Call?",body:`Are you sure you want to start a call with ${l}?`,confirmText:"Yes, start the call",cancelText:"Nope, that was an accident",onConfirm:()=>{a(...e)},onCancel:()=>{}})});this.patches.push(n)},onStop:function(){this.patches=[]}});
