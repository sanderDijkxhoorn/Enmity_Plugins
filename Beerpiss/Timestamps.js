function c(t){window.enmity.plugins.registerPlugin(t)}function o(t,e=!0){return window.enmity.getModule(t,e)}function s(t){return window.enmity.patcher.create(t)}const l=o(t=>{var e;return(e=t.default)==null?void 0:e.sendMessage}),u=o(t=>{var e;return(e=t.default)==null?void 0:e.uploadLocalFiles}),r=new RegExp("(?:0?\\d|1[0-2]):[0-5]\\d\\s*[ap]m|(?:[01]?\\d|2[0-3]):[0-5]\\d","gi");function d(t){const e=t.slice(-2).toLowerCase();let n=t.slice(0,-2).split(":"),a;return e==="am"?(n[0]=n[0]==="12"?"00":n[0],a=n.join(":")):e==="pm"?(n[0]=String(Number(n[0])%12+12),a=n.join(":")):a=t,a}function i(t){const e=new Date().toISOString().replace(/T/," ").replace(/\..+/,"").replace(/\d?\d:\d\d/,d(t).trim()),n=Math.round(new Date(e).getTime()/1e3);return isNaN(n)?t:`<t:${n}:t>`}const p={name:"Timestamps",patches:[],onStart(){s("message-timestamp-patcher").before(l.default,"sendMessage",(t,e,n)=>{e[1].content.search(r)!==-1&&(e[1].content=e[1].content.replace(r,a=>i(a)))}),s("upload-timestamp-patcher").before(u.default,"uploadLocalFiles",(t,e,n)=>{e[3].content.search(r)!==-1&&(e[3].content=e[3].content.replace(r,a=>i(a)))})},onStop(){this.patches=[]}};c(p);